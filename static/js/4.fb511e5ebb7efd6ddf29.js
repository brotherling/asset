webpackJsonp([4],{"6rPw":function(e,t,a){"use strict";(function(e){var i=a("COCy"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};window.submifile=[],t.a={name:"assetAdd",components:{builder:i.a},data:function(){return{parentMsg:"资产新增",AssetData:[],formSubmit:{},submitFile:[],Img:{data:"",dataname:""},FileData:[],filedata:[],filedataName:[],showfile:"",ValidationData:[],imageUrl:e.resUrl+"/Resources/images/nopicture.jpg",imamgeName:"",assetId:""}},computed:s({},Vuex.mapState(["assetadd"])),watch:{},beforeRouteEnter:function(e,t,a){a(function(a){"supplier"==t.name?(a.formSubmit.providerName=t.query.supplierName,a.formSubmit.selectProviderId=t.query.supplierId,a.setVuex(a.formSubmit)):"personnel"==t.name?(console.log(t.query.data),a.formSubmit.useDeptId=t.query.data.userDeptId,a.formSubmit.useDeptName=t.query.data.userDeptName,a.formSubmit.useUserId=t.query.data.userId,a.formSubmit.useUserName=t.query.data.userName,a.setVuex(a.formSubmit)):"department"==t.name?(a.formSubmit.useDeptId=t.query.useDeptId,a.formSubmit.useDeptName=t.query.useDeptName,a.setVuex(a.formSubmit)):"admindepartment"==t.name?(a.formSubmit.adminDeptId=t.query.useDeptId,a.formSubmit.adminDeptName=t.query.useDeptName,a.setVuex(a.formSubmit)):"assetClass"==t.name?(a.formSubmit.categoryId=t.query.categoryId,a.formSubmit.categoryName=t.query.categoryName,a.setVuex(a.formSubmit)):"designated"==t.name?(a.formSubmit.adressId=t.query.adressId,a.formSubmit.addressName=t.query.addressName,a.setVuex(a.formSubmit)):"homemenu"==t.name?(a.assetId="",a.getdata(),a.reseat(0),$("#vertical").show(),$("#reset").show()):"assetEdit"==t.name&&(a.assetId=e.query.id[0],$("#vertical").hide(),$("#reset").hide(),a.getdata(),a.reseat(0))})},methods:s({},Vuex.mapActions({assignment:"setAssetdate"}),{acceptImg:function(e){this.imamgeName="";var t=e,a=this,i=t.files[0],s=t.files[0].type,l=(t.files[0].size/1024/1024).toFixed("3"),r=new FileReader;r.onload=function(e){compress(e.target.result,l,function(e){a.imageUrl=e,a.Img.data=e.replace("data:"+s+";base64,",""),a.Img.dataname=s})},r.readAsDataURL(i)},acceptFile:function(e){this.filedataName=[],this.filedata=[],this.GetAssetDetail("aa"),this.FileData=e;var t=this;this.FileData.forEach(function(e,a){var i={};i.fileName=e.name,i.fileId="",t.filedataName.push(i);var s=new FileReader;s.readAsDataURL(e),s.onload=function(){var a=s.result.replace("data:"+e.type+";base64,","");t.filedata.push(a)}})},reseat:function(t){var a=$("#Setfile");a.after(a.clone()),a.remove(),submifile=[],this.filedataName=[],this.filedata=[],this.showfile="",this.imageUrl=e.resUrl+"/Resources/images/nopicture.jpg",this.imamgeName="未选择任何图片",this.Img={data:"",dataname:""},0!=t&&this.getsubmitData()},submit:function(){var e=this;this.$http.post("/API/assetservice/SaveAsset",{"":{obj:this.formSubmit,mainAstId:"",Img:this.Img}},{emulateJSON:!0}).then(function(t){e.assetId=t.data.resultNum,e.submitfile(t.data.resultNum)})},submitValidation:function(){for(var e=0,t=this.ValidationData,a=0;a<t.length;a++){var i=t[a];""!=this.formSubmit[i]&&e++}e==t.length&&this.formSubmit.assetName.trim()&&this.formSubmit.assetType?this.submit():this.$alert("请输入红色的必填项","提示",{confirmButtonText:"确定",callback:function(e){}})},submitfile:function(e){var t=this;this.$http.post("/API/assetservice/SaveFile",{"":{filedata:this.filedata,filedataName:this.filedataName,assetId:e}},{emulateJSON:!0}).then(function(e){t.$alert(e.data.resultMsg,"提示",{confirmButtonText:"确定",callback:function(e){t.filedataName=[],submifile=[],t.GetAssetDetail()}})})},getdata:function(){var e=this;this.$http.get("/API/assetservice/GetAssetPage",{parmas:{assetId:this.assetId}},{emulateJSON:!0}).then(function(t){e.AssetData=t.data,e.getValidationData(t.data),""==e.assetId?e.getsubmitData():e.GetAssetDetail()})},getsubmitData:function(){var e=this;this.$http.get("/API/assetservice/GetAddField",{emulateJSON:!0}).then(function(t){e.formSubmit=t.data,e.setVuex(vm.formSubmit)})},GetAssetDetail:function(t){var a=this;if(void 0!=t&&"aa"!=t){for(var i=0,s=this.filedataName.length;i<s;i++)if(this.filedataName[i].fileId==t)return void this.filedataName.splice(i,1)}else this.$http.get("/API/assetservice/GetAssetDetail",{params:{assetId:this.assetId}},{emulateJSON:!0}).then(function(i){if(a.formSubmit=i.data.obj,null!=i.data.Img&&(a.imageUrl=e.resUrl+i.data.Img),"aa"==t)for(var s=i.data.File,l=0;l<s.length;l++)a.filedataName.push(s[l]);else a.filedataName=i.data.File;a.setVuex(vm.formSubmit)})},setVuex:function(e){this.assignment(e)},getValidationData:function(e){for(var t in this.ValidationData=[],e)e[t].forEach(function(e){1==e.isNull&&this.ValidationData.push(e.tableName)},this)}}),mounted:function(){window.getValidationData=this.getValidationData,window.GetAssetDetail=this.GetAssetDetail}}}).call(t,a("9AUj"))},COCy:function(e,t,a){"use strict";var i={name:"builder",props:{AssetData:"",assetadd:"",formSubmit:"",filedataName:"",imageUrl:"",assetId:"",imamgeName:""},data:function(){return{imgName:"未选择任何图片",show3:!1,picked:"",datetime4:"2017-05-11",show:!0,options:["asb","ddd"],grouping:[],target:"",groupedData:[],saomiaoData:"",validNumber:function(e){return{valid:/^(?:[1-9]\d*|0)(?:\.\d+)?$|^(?:\.0|0\.)$/.test(e),msg:"请输入数字"}}}},activated:function(){this.imgName="未选择任何图片",document.getElementById("setscroll").scrollTop=this.scroll},watch:{pokerHistory:function(e,t){var a=this;""!=e?(this.$http.get("/API/assetservice/RefreshPageField",{params:{categoryId:e}},{emulateJSON:!0}).then(function(e){a.groupedData=e.data,getValidationData(e.data)}),this.$http.get("/API/assetservice/RefreshPageFieldGroup",{params:{categoryId:e}},{emulateJSON:!0}).then(function(e){a.grouping=e.data})):this.getdata()}},computed:{pokerHistory:function(){return this.formSubmit.categoryId}},methods:{saomiao:function(e){this.saomiaoData=e,this.saoma(this.fuzhi)},fuzhi:function(e){this.formSubmit[this.saomiaoData]=e},clickdel:function(e,t){if(""==t){for(var a=0,i=submifile.length;a<i;a++)if(submifile[a].name==e)return submifile.splice(a,1),void this.$emit("acceptfile",submifile)}else this.$http.post("/API/assetservice/DeleteFile",{"":t},{emulateJSON:!0}).then(function(e){GetAssetDetail(t)})},togolle:function(e){$(e.target).next().toggle()},numberChange:function(e,t){/^(?:[1-9]\d*|0)(?:\.\d+)?$|^(?:\.0|0\.)$/.test(e)||(this.formSubmit[t]="")},Intnumber:function(e,t){/^\d+$/.test(e)||(this.$message({showClose:!0,message:"请输入整数"}),this.formSubmit[t]="")},imgchange:function(e){var t=$("#imgFile").val().split("\\");this.imgName=t[t.length-1];var a=e.target;void 0!=a.files[0]&&this.$emit("accept",a)},subPic:function(){this.$refs.subimg.click()},openfile:function(){this.$refs.file.click()},fileChange:function(e){var t=e.target.files[0];void 0!=t&&(submifile.push(t),this.$emit("acceptfile",submifile))},linkDepartment:function(){""==this.formSubmit.useUserId&&this.$router.push({path:"/department"})},Deselectpage:function(){for(var e=0,t=this.$refs.c1;e<t.length;e++)this.$refs.c1[e].hide()},getdata:function(){var e=this;this.groupedData=this.AssetData,this.$http.get("/API/assetservice/GetGroupByAssetId",{emulateJSON:!0}).then(function(t){e.grouping=t.data})},setscroll:function(e){var t=e.target;this.scroll=t.scrollTop}},mounted:function(){this.imgName="未选择任何图片",this.getdata();var e=this;$(document).on("click","input",function(){e.target=this,setTimeout(function(){e.target.scrollIntoView(!0)},100)});$(window).height();$(window).resize(function(){setTimeout(function(){e.target.scrollIntoView(!0)},100)})}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll",staticStyle:{height:"80%","overflow-y":"auto"},attrs:{id:"setscroll"},on:{scroll:function(t){return e.setscroll(t)}}},[i("div",{staticClass:"assetAddConetent"},[i("div",{staticClass:"bulide_profittop",on:{click:function(t){return e.togolle(t)}}},[e._v("基本信息")]),e._v(" "),i("div",{staticClass:"setform"},[i("group",[e._l(e.AssetData.immobilization,function(t){return i("div",{key:t.id},["scan"==t.formType?i("div",{staticStyle:{position:"relative"}},["scan"==t.formType?i("x-input",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),i("span",{staticStyle:{position:"absolute",right:"0",top:"12px"},on:{click:function(a){return e.saomiao(t.tableName)}}},[i("img",{staticClass:"sImg",attrs:{src:a("vKV0")}})])],1):e._e(),e._v(" "),"customer"==t.formType?i("x-input",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"PositiveInteger"==t.formType?i("x-input",{ref:"number",refInFor:!0,class:1==t.isNull?"red":"",attrs:{"is-type":e.validNumber,disabled:0==t.enabled,type:"text",title:t.displayName,placeholder:t.placeHolder},on:{"on-blur":function(a){return e.Intnumber(e.formSubmit[t.tableName],t.tableName)}},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"serverNumber"==t.formType?i("x-input",{ref:"number",refInFor:!0,class:1==t.isNull?"red":"",attrs:{"is-type":e.validNumber,disabled:0==t.enabled,type:"text",title:t.displayName,placeholder:t.placeHolder},on:{"on-blur":function(a){return e.numberChange(e.formSubmit[t.tableName],t.tableName)}},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"planTime"==t.formType?i("datetime",{class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"serviceSelect"==t.formType?i("popup-radio",{ref:"c1",refInFor:!0,class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,options:t.field_optionswx.options},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}},[i("p",{staticClass:"vux-1px-b select_class",attrs:{slot:"popup-header"},on:{click:function(t){return e.Deselectpage()}},slot:"popup-header"},[e._v("取消")])]):e._e(),e._v(" "),"description"==t.formType?i("x-textarea",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"text"==t.formType?i("x-input",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"number"==t.formType?i("x-input",{ref:"number",refInFor:!0,class:1==t.isNull?"red":"",attrs:{"is-type":e.validNumber,value:e.formSubmit[t.tableName],disabled:0==t.enabled,type:"text",title:t.displayName,placeholder:t.placeHolder},on:{"on-blur":function(a){return e.numberChange(e.formSubmit[t.tableName],t.tableName)}},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"datetime"==t.formType?i("datetime",{class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"select"==t.formType?i("popup-radio",{ref:"c1",refInFor:!0,class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,options:t.field_optionswx.options},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}},[i("p",{staticClass:"vux-1px-b select_class",attrs:{slot:"popup-header"},on:{click:function(t){return e.Deselectpage()}},slot:"popup-header"},[e._v("取消")])]):e._e(),e._v(" "),"textarea"==t.formType?i("x-textarea",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[immobilization.tableName]"}}):e._e(),e._v(" "),"selectProviderId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.providerName,link:"/supplier"},model:{value:e.formSubmit.providerName,callback:function(t){e.$set(e.formSubmit,"providerName",t)},expression:"formSubmit.providerName"}}):e._e(),e._v(" "),"useUserId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.useUserName,link:"/personnel"},model:{value:e.formSubmit.useUserName,callback:function(t){e.$set(e.formSubmit,"useUserName",t)},expression:"formSubmit.useUserName"}}):e._e(),e._v(" "),"useDeptId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.useDeptName,link:"/department"},nativeOn:{click:function(t){return e.linkDepartment()}},model:{value:e.formSubmit.useDeptName,callback:function(t){e.$set(e.formSubmit,"useDeptName",t)},expression:"formSubmit.useDeptName"}}):e._e(),e._v(" "),"categoryId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.categoryName,link:"/assetClass"},model:{value:e.formSubmit.categoryName,callback:function(t){e.$set(e.formSubmit,"categoryName",t)},expression:"formSubmit.categoryName"}}):e._e(),e._v(" "),"adminDeptId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.adminDeptName,link:"/admindepartment"},model:{value:e.formSubmit.adminDeptName,callback:function(t){e.$set(e.formSubmit,"adminDeptName",t)},expression:"formSubmit.adminDeptName"}}):e._e(),e._v(" "),"selectAdressId"==t.formType?i("cell",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,value:e.formSubmit.addressName,link:"/designated"},model:{value:e.formSubmit.addressName,callback:function(t){e.$set(e.formSubmit,"addressName",t)},expression:"formSubmit.addressName"}}):e._e()],1)}),e._v(" "),i("cell",{attrs:{title:"附件"},nativeOn:{click:function(t){return e.openfile()}}},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"Setfile",multiple:"multiple"},on:{change:function(t){return e.fileChange(t)}}}),e._v(" "),i("i",{staticClass:"fa fa-file"}),e._v(" "),i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus-empty",staticStyle:{color:"#3F82DE"},attrs:{type:"ios-plus-empty",size:"20",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]),e._v(" "),e._l(e.filedataName,function(t){return i("div",{key:t.fileName},[e._v("\n          "+e._s(t.fileName)+"\n          "),i("span",{on:{click:function(a){return e.clickdel(t.fileName,t.fileId)}}},[i("icon",{attrs:{type:"clear"}})],1)])}),e._v(" "),i("cell",{attrs:{title:"图片"}},[i("div",{staticClass:"avatar-uploader",nativeOn:{click:function(t){return e.subPic()}}},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}),e._v(" "),i("input",{ref:"subimg",staticClass:"el-upload__input",attrs:{accept:"image/*",type:"file",name:"file",id:"imgFile"},on:{change:function(t){return e.imgchange(t)}}}),e._v(" "),i("p",{staticClass:"imgname"},[e._v(e._s(e.imamgeName||e.imgName))])])])])],2)],1),e._v(" "),e._l(e.grouping,function(t){return i("div",{key:t.id},[i("div",{staticClass:"bulide_profittop",on:{click:function(t){return e.togolle(t)}}},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"setform"},[i("group",e._l(e.groupedData[t.id],function(t){return i("div",{key:t.id},["select"==t.formType?i("popup-radio",{ref:"c1",refInFor:!0,class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder,options:t.field_optionswx.options},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[groupcont.tableName]"}},[i("p",{staticClass:"vux-1px-b select_class",attrs:{slot:"popup-header"},on:{click:function(t){return e.Deselectpage()}},slot:"popup-header"},[e._v("取消")])]):e._e(),e._v(" "),"text"==t.formType?i("x-input",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[groupcont.tableName]"}}):e._e(),e._v(" "),"number"==t.formType?i("x-input",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,type:"number",title:t.displayName,placeholder:t.placeHolder}}):e._e(),e._v(" "),"datetime"==t.formType?i("datetime",{class:1==t.isNull?"red":"",attrs:{readonly:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[groupcont.tableName]"}}):e._e(),e._v(" "),"textarea"==t.formType?i("x-textarea",{class:1==t.isNull?"red":"",attrs:{disabled:0==t.enabled,title:t.displayName,placeholder:t.placeHolder},model:{value:e.formSubmit[t.tableName],callback:function(a){e.$set(e.formSubmit,t.tableName,a)},expression:"formSubmit[groupcont.tableName]"}}):e._e()],1)}),0)],1)])})],2)])},staticRenderFns:[]};var l=a("C7Lr")(i,s,!1,function(e){a("EiD9")},null,null);t.a=l.exports},EiD9:function(e,t){},WqF1:function(e,t){},XTuI:function(e,t,a){"use strict";(function(e){var t=a("COCy"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};window.submifile=[];t.a,i({},Vuex.mapState(["assetadd"])),i({},Vuex.mapActions({assignment:"setAssetdate"}),{acceptImg:function(e){this.imamgeName="";var t=e,a=this,i=t.files[0],s=t.files[0].type,l=(t.files[0].size/1024/1024).toFixed("3"),r=new FileReader;r.onload=function(e){compress(e.target.result,l,function(e){a.imageUrl=e,a.Img.data=e.replace("data:"+s+";base64,",""),a.Img.dataname=s})},r.readAsDataURL(i)},acceptFile:function(e){this.filedataName=[],this.filedata=[],this.GetAssetDetail("aa"),this.FileData=e;var t=this;this.FileData.forEach(function(e,a){var i={};i.fileName=e.name,i.fileId="",t.filedataName.push(i);var s=new FileReader;s.readAsDataURL(e),s.onload=function(){var a=s.result.replace("data:"+e.type+";base64,","");t.filedata.push(a)}})},reseat:function(t){var a=$("#Setfile");a.after(a.clone()),a.remove(),submifile=[],this.filedataName=[],this.filedata=[],this.showfile="",this.imageUrl=e.resUrl+"/Resources/images/nopicture.jpg",this.imamgeName="未选择任何图片",this.Img={data:"",dataname:""},0!=t&&this.getsubmitData()},submit:function(){var e=this;this.$http.post("/API/assetservice/SaveAsset",{"":{obj:this.formSubmit,mainAstId:"",Img:this.Img}},{emulateJSON:!0}).then(function(t){e.assetId=t.data.resultNum,e.submitfile(t.data.resultNum)})},submitValidation:function(){for(var e=0,t=this.ValidationData,a=0;a<t.length;a++){var i=t[a];""!=this.formSubmit[i]&&e++}e==t.length&&this.formSubmit.assetName.trim()&&this.formSubmit.assetType?this.submit():this.$alert("请输入红色的必填项","提示",{confirmButtonText:"确定",callback:function(e){}})},submitfile:function(e){var t=this;this.$http.post("/API/assetservice/SaveFile",{"":{filedata:this.filedata,filedataName:this.filedataName,assetId:e}},{emulateJSON:!0}).then(function(e){t.$alert(e.data.resultMsg,"提示",{confirmButtonText:"确定",callback:function(e){t.filedataName=[],submifile=[],t.GetAssetDetail()}})})},getdata:function(){var e=this;this.$http.get("/API/assetservice/GetAssetPage",{parmas:{assetId:this.assetId}},{emulateJSON:!0}).then(function(t){e.AssetData=t.data,e.getValidationData(t.data),""==e.assetId?e.getsubmitData():e.GetAssetDetail()})},getsubmitData:function(){var e=this;this.$http.get("/API/assetservice/GetAddField",{emulateJSON:!0}).then(function(t){e.formSubmit=t.data,e.setVuex(vm.formSubmit)})},GetAssetDetail:function(t){var a=this;if(void 0!=t&&"aa"!=t){for(var i=0,s=this.filedataName.length;i<s;i++)if(this.filedataName[i].fileId==t)return void this.filedataName.splice(i,1)}else this.$http.get("/API/assetservice/GetAssetDetail",{params:{assetId:this.assetId}},{emulateJSON:!0}).then(function(i){if(a.formSubmit=i.data.obj,null!=i.data.Img&&(a.imageUrl=e.resUrl+i.data.Img),"aa"==t)for(var s=i.data.File,l=0;l<s.length;l++)a.filedataName.push(s[l]);else a.filedataName=i.data.File;a.setVuex(vm.formSubmit)})},setVuex:function(e){this.assignment(e)},getValidationData:function(e){for(var t in this.ValidationData=[],e)e[t].forEach(function(e){1==e.isNull&&this.ValidationData.push(e.tableName)},this)}})}).call(t,a("9AUj"))},Xjk3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("XTuI");var i=a("6rPw"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div1",staticStyle:{height:"100%",background:"white"}},[a("v-header",{attrs:{header:e.parentMsg}}),e._v(" "),a("builder",{staticStyle:{height:"80%"},attrs:{AssetData:e.AssetData,assetId:e.assetId,imageUrl:e.imageUrl,imamgeName:e.imamgeName,filedataName:e.filedataName,formSubmit:e.formSubmit,assetadd:e.assetadd},on:{acceptfile:e.acceptFile,accept:e.acceptImg}}),e._v(" "),a("div",{staticClass:"assetBottom"},[a("div",{on:{click:function(t){return e.submitValidation()}}},[e._v("提交")]),e._v(" "),a("span",{staticClass:"verticalLines",attrs:{id:"vertical"}}),e._v(" "),a("div",{attrs:{id:"reset"},on:{click:function(t){return e.reseat(1)}}},[e._v("重置")])])],1)},staticRenderFns:[]};var l=function(e){a("WqF1")},r=a("C7Lr")(i.a,s,!1,l,null,null);t.default=r.exports}});
//# sourceMappingURL=4.fb511e5ebb7efd6ddf29.js.map